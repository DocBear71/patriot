<!DOCTYPE html>
<html lang='en'>
<head>
    <title>Patriot Thanks: Update a Business</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="author" content="Edward G. McKeown">
    <meta name="date" content="2025/4/24">
    <meta name="description" content="Update Business Information in Patriot Thanks.">
    <meta name="keywords" content="Veterans, Discounts, Business Updates, Patriot Thanks">
    <link href="./images/docbearlogov4.png" rel="icon" type="image/x-icon">
    <link href="./css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link href="./css/normalize.css" rel="stylesheet">
    <link href="./css/style.css" rel="stylesheet">
    <link href="./css/figures.css" rel="stylesheet">
    <link href="./css/menu-auth.css" rel="stylesheet">
    <link href="./css/forms.css" rel="stylesheet">
    <link href="./css/form-validation.css" rel="stylesheet">
    <link href="./css/layout-fix.css" rel="stylesheet">
    <link href="./css/business-update-search.css" rel="stylesheet">
    <script src="./js/jquery-3.7.1.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>
    <script src="./js/business-search-improved.js"></script>
    <script src="./js/business-update-search.js"></script>
    <script src="./js/business-update-handler.js"></script>
    <script src="./js/reset-functionality.js"></script>
    <script src="./js/layout-manager.js"></script>
</head>
<body style="padding-top: 70px" id="page_layout">
<div id="nav-placeholder"></div>
<header>
    <br>
    <div class="left-banner">
        <a href="index.html">
            <img src="./images/docbearlogov4.png" alt="DocBear logo">
        </a>
    </div>
    <div class="right-banner">
        <h1>Patriot Thanks</h1>
        <hr>
        <h4>Update a Business</h4>
    </div>
    <div style="clear:left;"></div>
</header>
<main>
    <section class="container">
        <h2>Update a business in our database</h2>
        <p class="paragraph_style">Find a business and update its information in the Patriot Thanks database.
            This allows you to correct or update details for businesses that offer discounts and incentives
            for active duty, veterans, first responders, and their spouses.</p>
    </section>

    <!-- Step 1: Search for a business -->
    <fieldset>
        <legend>
            <h3 class="caveat">Step 1: Search for a Business</h3>
        </legend>
        <form id="business-search-form" onsubmit="return false">
            <label for="business-name">Name Search&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>
            <input type="text" id="business-name" name="business_name" placeholder="Business Name...">
            <br>
            <label for="address">Address Search&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>
            <input type="text" id="address" name="street-address" placeholder="Street Address, city, state, or zip..." >
            <br>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <input type="submit" value="Search Business">
        </form>
    </fieldset>

    <!-- Display search results -->
    <div id="business-search-results"></div>

    <!-- Step 2: Update Business Information -->
    <form id="business-update-form" onsubmit="return false;">
        <!-- Hidden field to store the selected business ID -->
        <input type="hidden" id="selected-business-id">

        <!-- Business Information Section -->
        <fieldset id="business-info-section">
            <legend>
                <h3 class="caveat">Step 2: Update Business Information</h3>
            </legend>
            <br>
            <label for="bname">Business Name&nbsp;&nbsp;</label>
            <input type="text" id="bname" name="business-name" placeholder="Business name...">
            <br>
            <label for="address1">Address Line 1&nbsp;&nbsp;</label>
            <input type="text" id="address1" name="address1" placeholder="Address Line 1...">
            <br>
            <label for="address2">Address Line 2&nbsp;&nbsp;</label>
            <input type="text" id="address2" name="address2" placeholder="Address Line 2...">
            <br>
            <label for="city">City&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>
            <input type="text" id="city" name="city" placeholder="Business City is...">
            <br>
            <label for="state">U.S. State&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>
            <select name="state" id="state">
                <option value="" selected="selected">Select a State</option>
                <option value="AL">Alabama</option>
                <option value="AK">Alaska</option>
                <option value="AZ">Arizona</option>
                <option value="AR">Arkansas</option>
                <option value="CA">California</option>
                <option value="CO">Colorado</option>
                <option value="CT">Connecticut</option>
                <option value="DE">Delaware</option>
                <option value="DC">District Of Columbia</option>
                <option value="FL">Florida</option>
                <option value="GA">Georgia</option>
                <option value="HI">Hawaii</option>
                <option value="ID">Idaho</option>
                <option value="IL">Illinois</option>
                <option value="IN">Indiana</option>
                <option value="IA">Iowa</option>
                <option value="KS">Kansas</option>
                <option value="KY">Kentucky</option>
                <option value="LA">Louisiana</option>
                <option value="ME">Maine</option>
                <option value="MD">Maryland</option>
                <option value="MA">Massachusetts</option>
                <option value="MI">Michigan</option>
                <option value="MN">Minnesota</option>
                <option value="MS">Mississippi</option>
                <option value="MO">Missouri</option>
                <option value="MT">Montana</option>
                <option value="NE">Nebraska</option>
                <option value="NV">Nevada</option>
                <option value="NH">New Hampshire</option>
                <option value="NJ">New Jersey</option>
                <option value="NM">New Mexico</option>
                <option value="NY">New York</option>
                <option value="NC">North Carolina</option>
                <option value="ND">North Dakota</option>
                <option value="OH">Ohio</option>
                <option value="OK">Oklahoma</option>
                <option value="OR">Oregon</option>
                <option value="PA">Pennsylvania</option>
                <option value="RI">Rhode Island</option>
                <option value="SC">South Carolina</option>
                <option value="SD">South Dakota</option>
                <option value="TN">Tennessee</option>
                <option value="TX">Texas</option>
                <option value="UT">Utah</option>
                <option value="VT">Vermont</option>
                <option value="VA">Virginia</option>
                <option value="WA">Washington</option>
                <option value="WV">West Virginia</option>
                <option value="WI">Wisconsin</option>
                <option value="WY">Wyoming</option>
            </select>
            <br>
            <label for="zip">Zip Code&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>
            <input type="text" id="zip" name="zip" placeholder="Business Zip Code...">
            <br>
            <label for="phone">Phone Number&nbsp;&nbsp;</label>
            <input type="text" id="phone" name="phone-number" placeholder="Business phone number...">
            <br>
            <label for="type">Business Type&nbsp;&nbsp;&nbsp;&nbsp;</label>
            <select name="type" id="type">
                <option value="" selected="selected">Select a Business Type</option>
                <option value="AUTO">Automotive</option>
                <option value="BEAU">Beauty</option>
                <option value="BOOK">Bookstore</option>
                <option value="CLTH">Clothing</option>
                <option value="CONV">Convenience Store/Gas Station</option>
                <option value="DEPT">Department Store</option>
                <option value="ELEC">Electronics</option>
                <option value="ENTR">Entertainment</option>
                <option value="FURN">Furniture</option>
                <option value="FUEL">Fuel Station/Truck Stop</option>
                <option value="GIFT">Gift Shop</option>
                <option value="GROC">Grocery</option>
                <option value="HARDW">Hardware</option>
                <option value="HEAL">Health</option>
                <option value="JEWL">Jewelry</option>
                <option value="OTHER">Other</option>
                <option value="RX">Pharmacy</option>
                <option value="REST">Restaurant</option>
                <option value="RETAIL">Retail</option>
                <option value="SERV">Service</option>
                <option value="SPEC">Specialty</option>
                <option value="SPRT">Sporting Goods</option>
                <option value="TECH">Technology</option>
                <option value="TOYS">Toys</option>
            </select>
            <br>
            <label for="status">Status&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>
            <select name="status" id="status">
                <option value="active">Active</option>
                <option value="inactive">Inactive</option>
            </select>
            <br><br>
            <div style="text-align: center;">
                <input type="submit" id="update-submit" value="Update Business">
            </div>
        </fieldset>
    </form>

    <!-- Status message container -->
    <div id="status-message" class="alert" style="display: none;"></div>
</main>
<footer class="footer_style">
    <br><br>
    <p>&copy; Copyright 2024 Doc Bear Enterprises, LLC</p>
    <div class="footer-links">
        <a href="terms.html">Terms of Use</a> |
        <a href="privacy.html">Privacy Policy</a> |
        <a href="contact.html">Contact Us</a>
    </div>
    <br><br>
</footer>
<button id="emergencyResetBtn" style="position: fixed; bottom: 10px; right: 10px; z-index: 9999; background-color: #dc3545; color: white; border: none; padding: 8px 15px; border-radius: 4px; font-weight: bold; display: none; cursor: pointer; box-shadow: 0 2px 5px rgba(0,0,0,0.2);">
    Emergency Reset
</button>
<script src="./js/bootstrap.bundle.min.js"></script>
<script>
    $(function(){
        $("#nav-placeholder").load("NavBar.html", function() {
            console.log("NavBar loaded");

            // Load terms modal script
            $.getScript("./js/terms-modal.js")
            .done(function() {
                console.log("Terms modal script loaded successfully");

                // Load login handler
                $.getScript("./js/bootstrap5-login-handler.js")
                .done(function() {
                    console.log("Login handler script loaded successfully");

                    // Check login status if function exists
                    setTimeout(function() {
                        if (typeof checkLoginStatus === 'function') {
                            checkLoginStatus();
                        }
                    }, 500);
                });
            });
        });
    });
    document.getElementById('emergencyResetBtn').addEventListener('click', function() {
        console.log("Emergency reset button clicked");
        $('.modal-backdrop').remove();
        $('body').removeClass('modal-open');
        $('body').css('padding-right', '');
        $('.modal').hide();
        $('body').css('overflow', '');
        this.style.display = 'none';
    });
    setTimeout(function() {
        const modalVisible = $('.modal').is(':visible') ||
                $('.modal-backdrop').length > 0 ||
                $('body').hasClass('modal-open');

        if (modalVisible) {
            console.log("Modal appears to be stuck - showing emergency reset button");
            document.getElementById('emergencyResetBtn').style.display = 'block';
        }
    }, 10000);
</script>
<style>
    /* Additional styles for search results and business details */
    .results-table {
        width: 90%;
        margin: 20px auto;
        border-collapse: collapse;
        text-align: left;
    }

    .results-table th, .results-table td {
        border: 1px solid #ddd;
        padding: 8px;
    }

    .results-table th {
        background-color: #f2f2f2;
        font-weight: bold;
        text-align: center;
    }

    .results-table tr:nth-child(even) {
        background-color: #f9f9f9;
    }

    .results-table tr:hover {
        background-color: #f1f1f1;
    }

    .select-business, .select-incentive {
        background-color: #0000ff;
        color: white;
        border: none;
        padding: 5px 10px;
        border-radius: 4px;
        cursor: pointer;
    }

    .select-business:hover, .select-incentive:hover {
        background-color: #0000cc;
    }

    /* Business details styling */
    .business-details {
        margin: 10px 0 20px 0;
        padding: 15px;
        border: 1px solid #ddd;
        border-radius: 5px;
        background-color: #f9f9f9;
    }

    .detail-row {
        margin-bottom: 8px;
    }

    .detail-label {
        font-weight: bold;
        width: 150px;
        display: inline-block;
    }

    .detail-value {
        display: inline-block;
    }

    /* Initially hide sections until needed */
    #business-info-section {
        display: none;
    }

    /* Error message styling */
    .error {
        color: red;
        font-weight: bold;
        text-align: center;
        margin: 10px 0;
    }

    /* Success message styling */
    .success {
        color: green;
        font-weight: bold;
        text-align: center;
        margin: 10px 0;
    }

    /* Disabled field styling */
    .disabled-field {
        background-color: #f0f0f0;
        color: #888;
        cursor: not-allowed;
    }

    textarea.disabled-field {
        resize: none;
    }

    /* Force display for edit section */
    :not(.form-group).force-display {
        display: block !important;
    }

    /* Use flex for form-group elements */
    .form-group.force-display {
        display: flex !important;
        justify-content: center !important;
        align-items: center !important;
    }

    /* Special handling for other type container */
    #otherTypeContainer.force-display,
    #otherTypeContainer[style*="display: block"] {
        display: flex !important;
    }
</style>
</body>
</html>