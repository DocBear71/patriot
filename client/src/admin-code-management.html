<!DOCTYPE html>
<html lang="en">
<head>
    <title>Admin Code Management - Patriot Thanks</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="author" content="Edward G. McKeown">
    <meta name="date" content="2025/5/18">
    <meta name="description" content="Admin code management for Patriot Thanks">
    <meta name="keywords" content="admin, code, management, patriot thanks">
    <link href="./images/docbearlogov4.png" rel="icon" type="image/x-icon">
    <link href="./css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link href="./css/normalize.css" rel="stylesheet">
    <link href="./css/style.css" rel="stylesheet">
    <link href="./css/figures.css" rel="stylesheet">
    <link href="./css/menu-auth.css" rel="stylesheet">
    <link href="./css/forms.css" rel="stylesheet">
    <link href="./css/form-validation.css" rel="stylesheet">
    <link href="./css/layout-fix.css" rel="stylesheet">
    <script src="./js/jquery-3.7.1.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>
    <script src="./js/layout-manager.js"></script>
</head>
<body style="padding-top: 70px" id="page_layout">
<div id="nav-placeholder"></div>

<header>
    <br>
    <div class="left-banner">
        <a href="./index.html">
            <img src="./images/docbearlogov4.png" alt="DocBear logo">
        </a>
    </div>
    <div class="right-banner">
        <h1>Patriot Thanks</h1>
        <hr>
        <h4>Admin Access Code Management</h4>
    </div>
    <div style="clear:left;"></div>
</header>

<main class="container mt-5">
    <div class="row mb-4">
        <div class="col-12">
            <div class="d-flex justify-content-between align-items-center">
                <h2>Admin Access Code Management</h2>
                <a href="admin-dashboard.html" class="btn btn-secondary">
                    <i class="bi bi-arrow-left"></i> Return to Dashboard
                </a>
            </div>
            <p class="text-muted">
                Manage access codes that grant admin privileges to users. These codes can be used during registration
                or by existing users to gain admin access.
            </p>
        </div>
    </div>

    <div class="card mb-4">
        <div class="card-header bg-primary text-white">
            <h4 class="mb-0"><i class="bi bi-plus-circle"></i> Create New Access Code</h4>
        </div>
        <div class="card-body">
            <form id="create-code-form">
                <div class="row">
                    <div class="col-md-4">
                        <div class="form-group mb-3">
                            <label for="accessCode" class="form-label">Access Code:</label>
                            <input type="text" id="accessCode" class="form-control"
                                   placeholder="Enter a unique code" required>
                            <small class="text-muted">This is the code users will enter to get admin access</small>
                        </div>
                    </div>
                    <br>
                    <div class="col-md-5">
                        <div class="form-group mb-3">
                            <label for="codeDescription" class="form-label">Description:</label>
                            <input type="text" id="codeDescription" class="form-control"
                                   placeholder="What this code grants access to" required>
                            <small class="text-muted">Describe what this code is for and who should use it</small>
                        </div>
                    </div>
                    <br>
                    <div class="col-md-3">
                        <div class="form-group mb-3">
                            <label for="expirationDate" class="form-label">Expiration Date:</label>
                            <input type="date" id="expirationDate" class="form-control">
                            <small class="text-muted">Leave blank for no expiration</small>
                        </div>
                    </div>
                </div>
                <br>
                <div class="mt-3">
                    <button type="submit" class="btn btn-primary">
                        <i class="bi bi-save"></i> Create Access Code
                    </button>
                </div>
            </form>
        </div>
    </div>

    <div class="card">
        <div class="card-header bg-info text-white">
            <h4 class="mb-0"><i class="bi bi-list"></i> Existing Access Codes</h4>
        </div>
        <div class="card-body">
            <div class="table-responsive">
                <table class="table table-striped table-hover">
                    <thead class="thead-dark">
                    <tr>
                        <th>Access Code</th>
                        <th>Description</th>
                        <th>Expiration</th>
                        <th>Actions</th>
                    </tr>
                    </thead>
                    <tbody id="codes-table-body">
                    <tr>
                        <td colspan="4" class="text-center">
                            <div class="spinner-border text-primary" role="status">
                                <span class="visually-hidden">Loading...</span>
                            </div>
                            <p class="mt-2">Loading access codes...</p>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Help section -->
    <div class="card mt-4">
        <div class="card-header bg-secondary text-white">
            <h4 class="mb-0"><i class="bi bi-question-circle"></i> Help & Information</h4>
        </div>
        <div class="card-body">
            <div class="accordion" id="helpAccordion">
                <div class="accordion-item">
                    <h2 class="accordion-header" id="headingOne">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                data-bs-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
                            How do admin access codes work?
                        </button>
                    </h2>
                    <div id="collapseOne" class="accordion-collapse collapse" aria-labelledby="headingOne"
                         data-bs-parent="#helpAccordion">
                        <div class="accordion-body">
                            <p>Admin access codes grant users administrator privileges in Patriot Thanks. These codes can be used in two ways:</p>
                            <ul>
                                <li><strong>During registration:</strong> When a new user selects "Admin" as their account type, they'll be prompted to enter an access code.</li>
                                <li><strong>By existing users:</strong> Current users can upgrade their account to admin status by entering a valid access code in their profile settings.</li>
                            </ul>
                            <p>Once a code is used, it remains valid for other users unless you delete it or it reaches its expiration date.</p>
                        </div>
                    </div>
                </div>
                <div class="accordion-item">
                    <h2 class="accordion-header" id="headingTwo">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                            Best practices for access code security
                        </button>
                    </h2>
                    <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo"
                         data-bs-parent="#helpAccordion">
                        <div class="accordion-body">
                            <p>To maintain security when managing admin access codes:</p>
                            <ul>
                                <li><strong>Use strong codes:</strong> Create complex, hard-to-guess access codes (include letters, numbers, and special characters).</li>
                                <li><strong>Set expiration dates:</strong> For temporary admin access, always set an expiration date.</li>
                                <li><strong>Delete unused codes:</strong> Remove access codes when they're no longer needed.</li>
                                <li><strong>Share securely:</strong> When sharing access codes with users, use secure communication methods.</li>
                                <li><strong>Audit regularly:</strong> Periodically review the list of active admin codes and remove any that are no longer needed.</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="accordion-item">
                    <h2 class="accordion-header" id="headingThree">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                            Tracking code usage
                        </button>
                    </h2>
                    <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree"
                         data-bs-parent="#helpAccordion">
                        <div class="accordion-body">
                            <p>Currently, Patriot Thanks does not track which users have used specific access codes. However, you can:</p>
                            <ul>
                                <li>Create unique, descriptive codes for different purposes or teams</li>
                                <li>Use the description field to document the intended recipients</li>
                                <li>Check the user management section to see all users with admin access</li>
                            </ul>
                            <p>We're working on adding usage tracking in a future update to provide better security and accountability.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>

<footer class="footer_style mt-5">
    <br><br>
    <p>&copy; Copyright 2024 Doc Bear Enterprises, LLC</p>
    <div class="footer-links">
        <a href="terms.html">Terms of Use</a> |
        <a href="privacy.html">Privacy Policy</a> |
        <a href="contact.html">Contact Us</a>
    </div>
    <br><br>
</footer>

<!-- Emergency Reset Button -->
<button id="emergencyResetBtn"
        style="position: fixed; bottom: 10px; right: 10px; z-index: 9999; background-color: #dc3545; color: white; border: none; padding: 8px 15px; border-radius: 4px; font-weight: bold; display: none; cursor: pointer; box-shadow: 0 2px 5px rgba(0,0,0,0.2);">
    Emergency Reset
</button>

<!-- Bootstrap and other scripts -->
<script src="./js/bootstrap.bundle.min.js"></script>
<script src="./js/admin-code-manager.js"></script>
<script>
    $(function() {
        $('#nav-placeholder').load('NavBar.html', function() {
            console.log('NavBar loaded');

            // Load terms modal script
            $.getScript('./js/terms-modal.js').done(function() {
                console.log('Terms modal script loaded successfully');

                // Load login handler
                $.getScript('./js/bootstrap5-login-handler.js').done(function() {
                    console.log('Login handler script loaded successfully');

                    // Check login status if function exists
                    setTimeout(function() {
                        if (typeof checkLoginStatus === 'function') {
                            checkLoginStatus();
                        }
                    }, 500);
                });
            });
        });
    });

    document.getElementById('emergencyResetBtn').addEventListener('click', function() {
        console.log('Emergency reset button clicked');
        $('.modal-backdrop').remove();
        $('body').removeClass('modal-open');
        $('body').css('padding-right', '');
        $('.modal').hide();
        $('body').css('overflow', '');
        this.style.display = 'none';
    });

    setTimeout(function() {
        const modalVisible = $('.modal').is(':visible') ||
                $('.modal-backdrop').length > 0 ||
                $('body').hasClass('modal-open');

        if (modalVisible) {
            console.log('Modal appears to be stuck - showing emergency reset button');
            document.getElementById('emergencyResetBtn').style.display = 'block';
        }
    }, 10000);
</script>
</body>
</html>