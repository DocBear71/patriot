let ModalManager={getModal(e){const t=document.getElementById(e);return t?bootstrap.Modal.getInstance(t)||new bootstrap.Modal(t):(console.error(`Modal element with ID ${e} not found`),null)},show(e,t={}){try{this.cleanupModals();const o=document.getElementById(e);if(!o)return void console.error(`Modal element with ID ${e} not found`);void 0!==t.backdrop&&o.setAttribute("data-bs-backdrop",t.backdrop),void 0!==t.keyboard&&o.setAttribute("data-bs-keyboard",t.keyboard),void 0!==t.focus&&o.setAttribute("data-bs-focus",t.focus),(bootstrap.Modal.getInstance(o)||new bootstrap.Modal(o,t)).show(),t.emergencyReset&&this.setupEmergencyReset(e,t.resetDelay||1e4),console.log(`Modal ${e} shown`)}catch(t){console.error(`Error showing modal ${e}:`,t),this.manualShowModal(e)}},hide(e){try{const t=this.getModal(e);t?(t.hide(),console.log(`Modal ${e} hidden`)):this.manualHideModal(e)}catch(t){console.error(`Error hiding modal ${e}:`,t),this.manualHideModal(e)}},manualShowModal(e){console.log(`Manually showing modal ${e}`);const t=document.getElementById(e);if(t){if(t.classList.add("show"),t.style.display="block",t.setAttribute("aria-modal","true"),t.setAttribute("role","dialog"),t.removeAttribute("aria-hidden"),!document.querySelector(".modal-backdrop")){const e=document.createElement("div");e.classList.add("modal-backdrop","fade","show"),document.body.appendChild(e)}document.body.classList.add("modal-open")}},manualHideModal(e){console.log(`Manually hiding modal ${e}`);const t=document.getElementById(e);t&&(t.classList.remove("show"),t.style.display="none",t.setAttribute("aria-hidden","true"),t.removeAttribute("aria-modal"),t.removeAttribute("role"),this.cleanupModals())},cleanupModals(){document.querySelectorAll(".modal-backdrop").forEach((e=>e.remove())),document.body.classList.remove("modal-open"),document.body.style.paddingRight="",document.body.style.overflow=""},setupEmergencyReset(e,t=1e4){setTimeout((()=>{const t=document.getElementById(e);t&&t.classList.contains("show")&&this.showEmergencyButton(e)}),t)},showEmergencyButton(e){let t=document.getElementById("emergencyResetBtn");t||(t=document.createElement("button"),t.id="emergencyResetBtn",t.textContent="Emergency Reset",Object.assign(t.style,{position:"fixed",bottom:"10px",right:"10px",zIndex:"9999",backgroundColor:"#dc3545",color:"white",border:"none",padding:"8px 15px",borderRadius:"4px",fontWeight:"bold",cursor:"pointer",boxShadow:"0 2px 5px rgba(0,0,0,0.2)"}),t.addEventListener("click",(()=>{this.emergencyReset(e),t.style.display="none"})),document.body.appendChild(t)),t.style.display="block"},emergencyReset(e){console.log(`Emergency reset for modal ${e}`);try{this.hide(e)}catch(e){console.error("Standard hide failed during emergency reset:",e)}this.cleanupModals();const t=document.getElementById(e);t&&(t.classList.remove("show"),t.style.display="none",t.setAttribute("aria-hidden","true"),t.removeAttribute("aria-modal"),t.removeAttribute("role"));const o=document.getElementById("emergencyResetBtn");return o&&(o.style.display="none"),!0}};"undefined"!=typeof module&&module.exports&&(module.exports=ModalManager),window.ModalManager=ModalManager;