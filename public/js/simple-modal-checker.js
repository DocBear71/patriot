$(document).ready((function(){console.log("Simple Modal Checker loaded"),setTimeout((function(){const e=localStorage.getItem("patriotThanksSession");if(e)try{const t=JSON.parse(e),o="May 14, 2025";t.user.termsAccepted&&t.user.termsVersion===o?console.log("DIRECT CHECK: User has already accepted terms"):(console.log("DIRECT CHECK: User needs to accept terms"),function(e){const t=document.createElement("div");t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.backgroundColor="rgba(0, 0, 0, 0.7)",t.style.zIndex="9999",t.style.display="flex",t.style.alignItems="center",t.style.justifyContent="center";const o=document.createElement("div");o.style.backgroundColor="white",o.style.borderRadius="8px",o.style.padding="20px",o.style.width="90%",o.style.maxWidth="600px",o.style.maxHeight="80vh",o.style.overflowY="auto",o.style.boxShadow="0 4px 15px rgba(0, 0, 0, 0.3)",o.innerHTML='\n      <h2 style="margin-top: 0;">Terms of Use Update</h2>\n      <p>Our Terms of Use have been updated. Please review and accept the new terms to continue using our services.</p>\n      \n      <div style="max-height: 300px; overflow-y: auto; border: 1px solid #ddd; padding: 15px; margin: 15px 0; background-color: #f9f9f9;">\n        <h4>Summary of Key Terms</h4>\n        <p><strong>Effective Date:</strong> May 14, 2025</p>\n        \n        <h5 style="margin-top: 15px;">1. ACCEPTANCE OF TERMS</h5>\n        <p>By accessing or using Patriot Thanks, you agree to be bound by these Terms of Use.</p>\n        \n        <h5 style="margin-top: 15px;">2. INTELLECTUAL PROPERTY RIGHTS</h5>\n        <p>All content, features, and functionality on Patriot Thanks are owned by Doc Bear Enterprises, LLC.</p>\n        \n        <h5 style="margin-top: 15px;">3. USER RESPONSIBILITIES</h5>\n        <p>Users are responsible for maintaining the confidentiality of their account information.</p>\n        \n        <h5 style="margin-top: 15px;">4. DATA COLLECTION AND PRIVACY</h5>\n        <p>We collect certain personal information to provide our services.</p>\n        \n        <h5 style="margin-top: 15px;">5. LIMITATION OF LIABILITY</h5>\n        <p>Patriot Thanks and its owners will not be liable for any indirect, incidental, special, or consequential damages.</p>\n      </div>\n      \n      <div style="display: flex; margin-top: 20px; justify-content: space-between;">\n        <button id="simpleAccept" style="background-color: #28a745; color: white; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer;">Accept Terms</button>\n        <button id="simpleDecline" style="background-color: #dc3545; color: white; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer;">Decline</button>\n      </div>\n    ',t.appendChild(o),document.body.appendChild(t),document.getElementById("simpleAccept").addEventListener("click",(function(){console.log("Simple accept clicked"),e.user.termsAccepted=!0,e.user.termsAcceptedDate=(new Date).toISOString(),e.user.termsVersion="May 14, 2025",localStorage.setItem("patriotThanksSession",JSON.stringify(e)),document.body.removeChild(t),function(e){const t=e.user._id,o=e.token,n="localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname?`http://${window.location.host}`:window.location.origin;fetch(`${n}/api/auth.js?operation=update-terms-acceptance`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+o},body:JSON.stringify({userId:t,termsAccepted:!0,termsAcceptedDate:(new Date).toISOString(),termsVersion:"May 14, 2025"})}).then((e=>e.json())).then((e=>{console.log("Terms acceptance updated on server successfully")})).catch((e=>{console.error("Error updating terms on server:",e)}))}(e)})),document.getElementById("simpleDecline").addEventListener("click",(function(){console.log("Simple decline clicked"),confirm("If you do not accept the updated terms, you will be logged out and unable to use the service. Continue?")&&(localStorage.removeItem("patriotThanksSession"),localStorage.removeItem("isLoggedIn"),document.body.removeChild(t),location.reload())}))}(t))}catch(e){console.error("Error checking terms:",e)}else console.log("No session data - not checking terms")}),1e3)}));