document.addEventListener("DOMContentLoaded",(function(){console.log("Incentive Form Fixes Loaded!");const e=window.loadIncentiveForEditing;window.loadIncentiveForEditing=function(t){if(console.log("Enhanced loadIncentiveForEditing called with:",t),"function"==typeof e&&e(t),!t)return;const n=document.getElementById("incentiveAvailable"),o=document.getElementById("incentiveNotAvailable");n&&o&&(t.is_available?(n.checked=!0,o.checked=!1):(n.checked=!1,o.checked=!0),t.is_available?n.dispatchEvent(new Event("change")):o.dispatchEvent(new Event("change")),console.log("Radio buttons set:",t.is_available?"Available":"Not Available"));const i=document.getElementById("incentiveType"),c=document.getElementById("otherTypeContainer"),d=document.getElementById("otherTypeDescription");if(i&&c&&d){for(let e=0;e<i.options.length;e++)if(i.options[e].value===t.type){i.selectedIndex=e;break}i.dispatchEvent(new Event("change")),"OT"===t.type&&(c.style.display="block",d.value=t.other_description||"",console.log("Set other type description:",t.other_description))}const l=document.getElementById("discountTypePercentage"),s=document.getElementById("discountTypeDollar");l&&s&&t.discount_type&&("dollar"===t.discount_type?(s.checked=!0,l.checked=!1):(l.checked=!0,s.checked=!1),"dollar"===t.discount_type?s.dispatchEvent(new Event("change")):l.dispatchEvent(new Event("change")),console.log("Discount type set to:",t.discount_type));const a=document.getElementById("incentive-edit-section");a&&(a.style.display="block",setTimeout((()=>{a.scrollIntoView({behavior:"smooth"})}),100))};const t=document.getElementById("incentiveType"),n=document.getElementById("otherTypeContainer");if(t&&n){const e=t.cloneNode(!0);t.parentNode.replaceChild(e,t),e.addEventListener("change",(function(){if(console.log("Incentive type changed to:",this.value),"OT"===this.value){n.style.display="block";const e=document.getElementById("incentiveAvailable");if(e&&e.checked){const e=document.getElementById("otherTypeDescription");e&&(e.disabled=!1,e.classList.remove("disabled-field"))}}else n.style.display="none"}))}const o=window.toggleIncentiveFields;window.toggleIncentiveFields=function(){"function"==typeof o&&o();const e=document.getElementById("incentiveAvailable"),t=document.getElementById("incentiveNotAvailable"),n=document.getElementById("incentiveType"),i=document.getElementById("otherTypeContainer"),c=document.getElementById("otherTypeDescription");if(e&&t&&n&&i&&c){const t=e.checked;t&&"OT"===n.value?(i.style.display="block",c.disabled=!1,c.classList.remove("disabled-field")):t?"OT"!==n.value&&(i.style.display="none"):(i.style.display="none",c.disabled=!0,c.classList.add("disabled-field"))}};const i=document.getElementById("discountTypePercentage"),c=document.getElementById("discountTypeDollar"),d=document.getElementById("amountLabel");if(i&&c&&d){const e=i.cloneNode(!0),t=c.cloneNode(!0);i.parentNode.replaceChild(e,i),c.parentNode.replaceChild(t,c),e.addEventListener("change",(function(){if(this.checked){d.textContent="Incentive Amount as a %";const e=document.getElementById("incentiveAmount");e&&(e.setAttribute("min","0"),e.setAttribute("max","100"),e.setAttribute("step","0.1"))}})),t.addEventListener("change",(function(){if(this.checked){d.textContent="Incentive Amount in $";const e=document.getElementById("incentiveAmount");e&&(e.setAttribute("min","0"),e.removeAttribute("max"),e.setAttribute("step","0.01"))}}))}console.log("All incentive form fixes have been applied successfully!")}));